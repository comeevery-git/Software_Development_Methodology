#### 2부. 모델 주도 설계의 기본 요소

### 4장. 도메인의 격리
> 도메인에서 발생하는 문제를 해결하는 소프트웨어의 각 요소는, 그것의 중요성에 어울리지 않게 대개 전체 소프트웨어 시스템의 극히 작은 부분을 구성한다.
> 
> 그러한 요소에 가장 적절한 생각을 반영하려면 모델의 구성요소를 살펴보고 그것들을 하나의 시스템으로 바라볼 수 있어야 한다.
> 
> 시스템에서 도메인과 관련이 적은 기능으로부터 도메인 객체를 분리할 필요가 있으며, 
> 그렇게 해서 도메인 개념을 다른 소프트웨어 기술에만 관련된 개념과 혼동하거나, 
> 또는 시스템이라는 하나의 큰 덩어리 안에서 도메인을 전혀 바라보지 못하는 문제를 방지할 수 있다.


---


### 계층형 아키텍쳐(Layered Architecture)
> 사용자 인터페이스 (또는 표현) 계층
> - 사용자에게 정보를 보여주고 사용자의 명령을 해석하는 일을 책임진다. (다른 컴퓨터 시스템이 외부 행위자가 되기도 한다)
> 
> 응용 계층
> - 소프트웨어가 수행할 작업을 정의하고 표현력 있는 도메인 객체가 문제를 해결하게 한다.
> - 이 계층에서 책임지는 작업은 어무상 중요하거나 다른 시스템의 응용 계층과 상호작용하는 데 필요한 것들이다.
> - 이 계층은 얇게 유지된다. 여기에는 업무 규칙이나 지식이 포함되지 않으며, 오직 작업을 조정하고 아래에 위치한 계층에 포함된 도메인 객체의 협력자에게 작업을 위임한다.
> - 이 계층에서는 업무 상황을 반영하는 상태가 없지만 사용자나 프로그램의 작업에 대한 진행상황을 반영하는 상태를 가질 수는 있다.
> 
> 도메인 (또는 모델) 계층
> - 업무 개념과 업무 상황에 관한 정보, 업무 규칙을 표현하는 일을 책임진다.
> - 이 계층에서는 업무 상황을 반영하는 상태를 제어하고 사용하며, 그와 같은 상태 저장과 관련된 기술적인 세부사항은 인프라스트럭쳐에 위임한다.
> - 이 계층은 업무용 소프트웨어의 핵심이다.
> 
> 인프라스트럭쳐
> - 상위 계층을 지원하는 일반화된 기술적 기능을 제공한다.
> - 이러한 기능에는 애플리케이션에 대한 메시지 전송, 도메인 영속화, UI에 위젯을 그리는 것 등이 있다.
> - 또한 인프라스트럭쳐 계층은 아키텍쳐 프레임워크를 통해 네 가지 계층에 대한 상호작용 패턴을 지원할 수도 있다.

- 계층형 아키텍쳐는 도메인을 격리하는 가장 일반적인 방법이다.

- 매우 복잡한 작업을 처리하는 소프트웨어를 만들 경우 `관심사의 분리(Seperation of Concerns)`를 통해 복잡성을 줄이는 것이 중요하다.
  - 관심사의 분리란 서로 다른 관심사를 가진 요소들을 분리하는 것을 의미한다.
  - 이로써 격리된 상태에 있는 각 설계 요소에 집중할 수 있다.

[//]: # (  - 동시에 시스템 내의 정교한 상호작용은 그러한 분리와는 상관없이 유지돼야 한다.)

- 계층화의 핵심 원칙은 한 계층의 모든 요소는 오직 같은 계층에 존재하는 다른 요소나 계층상 `아래`에 위치한 요소에만 의존한다는 것이다.
  - 위로 거슬러 올라가는 의사소통은 반드시 간접적인 메커니즘을 거쳐야 한다. (추후 설명)

[//]: # (- 각 측면에서는 더욱 응집력 있는 설계가 가능해지며, 이로써 설계를 훨씬 더 쉽게 이해할 수 있다.)


---


### 도메인 계층의 분리
> MODEL-DRIVEN DESIGN을 가능케 하는 것은 결정적으로 `도메인 계층`을 분리하는 데 있다.

1. 복잡한 프로그램을 여러 개의 계층으로 나눠라.
2. 응집력 있고 오직 아래에 위치한 계층에만 의존하는 각 계층에서 설계를 발전시켜라.
3. 표준 아키텍쳐 패턴에 따라 상위 계층과의 결합을 느슨하게 유지하라. 
4. 도메인 모델과 관련된 코드는 모두 한 계층에 모으고 사용자 인터페이스 코드나 애플리케이션 코드, 인프라스트럭쳐 코드와 격리하라.
5. 도메인 객체(표현이나 저장, 애플리케이션 작업을 관리하는 등의 책임에서 자유로운)는 도메인 모델을 표현하는 것에만 집중할 수 있다.
- 이로써 모델은 진화를 거듭해 본질적인 업무 지식을 포착해서 해당 업무 지식이 효과를 발휘할 수 있을 만큼 풍부하고 명확해질 것이다.


---

### 계층 간 관계 설정
- 




---

