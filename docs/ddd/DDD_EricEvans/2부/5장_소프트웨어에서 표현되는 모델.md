#### 2부. 모델 주도 설계의 기본 요소

### 5장. 소프트웨어에서 표현되는 모델
> 객체 간의 연관관계(association)를 설계하고,
> 
> 그러한 연관관계를 합리적으로 구성하는 것과 관련된 문제를 논의하는 것으로 시작해보자.
> 
> 여러 모델 요소 가운데 모델을 표현하는 세 가지 패턴을 구분하는 방법을 살펴본다.
> - 엔티티(entity), 값 객체(value object), 서비스(service)


---


- Service
  - 클라이언트 요청에 대해 수행되는 뭔가를 의미한다.
    - 소프트웨어 기술 계층에는 수많은 SERVICE가 있다. 그러한 SERVICE는 도멩니에도 나타나는데, 소프트웨어에서 수행해야하는 것에는 해당하지만 상태를 주고받지는 않는 활동을 모델링 하는 경우가 여기에 해당한다.
      - Entity와 Value Object를 사용하여 특정 작업을 수행한다.
- Module
  - 모듈에 관해 논의하면서 모든 설계 관련 의사결정은 도메인에 부여된 통찰력을 바탕으로 내려야 한다는 것을 알게될 것이다.
  - 높은 응집도(High Cohesion)와 낮은 결합도(Low Coupling)라는 개념은 도메인 개념에도 적용할 수 있다.
    - 응집도는 모듈의 요소들이 서로 얼마나 관련되어 있는지를 나타내는 척도이다.
    - 결합도는 모듈이 다른 모듈에 얼마나 의존하고 있는지를 나타내는 척도이다.
  - MODEL-DRIVEN DESIGN에서 MODULE은 모델의 한 부분이므로 도메인의 개념을 반영해야 한다.


---


### 연관관계
- 모델링과 실제 구현 간의 상호작용은 여러 객체 간의 연관관계에서 특히 까다롭다.
- 일대다(one-to-many) 연관관계는 인스턴스 변수에 들어 있는 컬렉션으로 구현할 수도 있다.
  - 하지만 설계도 반드시 그렇게 되는 것은 아니다.
    - 설계에는 어떤 특정한 탐색 메커니즘을 명시해야 하며, 그러한 메커니즘의 행위는 모델 내의 연관관계와 일치해야 한다.
- 현실세계에는 수많은 다대다(many-to-many) 연관관계가 있으며, 상당수는 애초부터 양방향(bidirectional)으로 나타난다.
  - 이러한 일반적인 형태는 연관관계 구현와 유지보수를 복잡하게 한다.
- 쉽게 다루기 위한 방법으로는 세 가지가 있다.
  1. 탐색 방향을 부여한다.
  2. 한정자(qualifier)를 추가해서 사실상 다중성(multiplicity)을 줄인다.
  3. 중요하지 않은 연관관계를 제거한다.
- 어떤 탐색 방향은 도메인의 본연적인 특성을 반영하기도 한다.
- 제약이 더해진 연관관계는 더 많은 지식과 실제적인 설계를 전해준다.


---


### ENTITY(엔티티, 참조객체라고도 함)
- 수많은 객체는 본질적으로 해당 객체의 속성이 아닌 연속성과 식별성이 이어지느냐를 기준으로 정의된다.
- 개념적 식별성은 객체와 해당 객체의 저장 형태, 전화를 거는 사람과 같은 현실의 행위자의 구현 사이에서 일치해야 한다.
  - 속성은 일치하지 않을 수도 있다.
- 객체 모델링을 할 때 우리는 객체의 속성에 집중하곤 하는데, ENTITY의 근본적인 개념은
  - 객체의 생명주기 내내 이어지는 추상적인 연속성이다.
    - 그러한 추상적인 연속성은 여러 형태를 거쳐 전달된다.
      - 어떤 객체는 해당 객체의 속성을 자신의 주된 정의로 삼지 않는다.
        - 그러한 객체는 오랜 시간에 걸쳐 작용하는 식별성의 이어짐을 나타내며, 종종 전혀 다른 형태로 나타나기도 한다.
- 어떤 객체를 일차적으로 해당 객체의 식별성으로 정의할 경우 그 객체를 ENTITY라 한다.
  - ENTITY에는 모델링과 설계상의 특수한 고려사항이 포함되어 있다.
  - ENEITY는 자신의 생명주기동안 형태와 내용이 급격하게 바뀔 수도 있지만, 연속성은 유지해야 한다.
  - ENTITY의 클래스 정의와 책임, 속성, 연관관계는 ENTITY에 포함된 특정 속성보다는 ENTITY의 정체성에 초점을 맞춰야 한다.
  - ENTITY를 의미에 따라 분류한다면 모델이 더욱 투명해지고 구현은 견고해질 것이다.
  - ENTITY는 생명주기 내내 이어지는 연속성과 애플리케이션 사용자에게 중요한 속성과는 독립적인 특징을 가진 것이다.
- 한편으로 모델 내의 모든 객체가 의미 있는 식별성을 지닌 ENTITY인 것은 아니다.
- 모델 ENTITY는 자바의 엔티티 빈(entity bean)과 같은 것이 아니다.
  - 엔티티 빈은 ENTITY 구현을 위한 프레임워크를 목표로 했지만 그렇게 되진 않았다.
    - 대부분의 ENTITY는 평범한 객체로 구현된다.
    - ENTITY의 구현 방법과는 상관없이 ENTITY는 도메인 모델의 중요한 특징 가운데 하나다.


..


---



